<!DOCTYPE html>
<html lang="en" ng-app="app">
  <head>
    <meta charset="utf-8">
    <title>The LifeWeb Initiative</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="/app/lifeweb/ico/favicon.png">

    <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css" rel="stylesheet">
    <link href="/app/lifeweb/css/lifeweb.css" rel="stylesheet">

	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
      <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.1.4/angular.min.js"></script>
      <script src="http://angular-ui.github.com/bootstrap/ui-bootstrap-tpls-0.2.0.js"></script>
      <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular-sanitize.min.js"></script>
      <script src="http://code.angularjs.org/1.0.0rc10/angular-cookies-1.0.0rc10.js"></script>

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="/app/lifeweb/js/html5shiv.js"></script>
    <![endif]-->

    <script src="/app/lifeweb/app/js/app.js" ></script>
    <script src="/app/lifeweb/directives/signin.js"></script>
    <script src="/app/lifeweb/app/js/ProjectsController.js" ></script>
    <script src="/app/lifeweb/app/js/filters/filters.js" ></script>

  </head>

  <body data-spy="scroll" data-target=".bs-docs-sidebar" data-twttr-rendered="true" >

    <!-- NAVBAR
    ================================================== -->
     
     <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
                  <div ng-include src="'/app/lifeweb/navigation.html'"></div>
          </div>
        </div>
      </div>

    <!-- Wrap the rest of the page in another container to center all the content. -->
    <div class="container" style="min-height:800px!important;">

       <!-- Docs nav
    ================================================== -->
        <div class="row" ng-controller="ProjectsCtrl" >
            <div class="span3 bs-docs-sidebar ng-cloak">
                <ul class="nav nav-list bs-docs-sidenav ">
                    <li><a style="font-size: 14px; color: #999; text-transform: uppercase;">
                        
                        Search
                        <span class="badge badge-info pull-right" style="font-size:110%;">{{(projects | filter:search.keyword | filterCountry:search.country | filterYear:search.year_submitted | filterEcoservices:search.benefits | filterFunding:search.funding_needed | filterFundingStatus:search.is_funded | filterTargets:search.targets ).length}}</span>
                        </a></li>
                    <li>
                        

                        <input ng-model="search.keyword" style="width: 98%; margin-top: 12px; height: 22px;">

                        <select ng-model="search.country" style="width: 100%; margin-top: 12px;" ng-options="country.code as country.name for country in ((countries | filterProjectCountry:filtered)| orderBy:'name' ) ">
                            <option value="" selected>Country</option>
                        </select>

                        <select ng-model="search.is_funded" style="width: 100%; margin-top: 5px;">
                            <option value="" selected>Funding status</option>
                            <option value="funded">funded</option>
                            <option value="not yet funded">not yet funded</option>
                            <option value="some expected funding">some expected funding</option>
                            <option value="some secured funding">some secured funding</option>
                        </select>

                        <select ng-model="search.benefits" style="width: 100%; margin-top: 5px;">
                            <option value="" selected>Ecosystem Benefits</option>
                            <option value="ecoservices1">Climate Change Mitigation</option>
                            <option value="ecoservices2">Climate Change Adapation</option>
                            <option value="ecoservices3">Freahwater Security</option>
                            <option value="ecoservices4">Food Security</option>
                            <option value="ecoservices5">Human Health</option>
                            <option value="ecoservices6">Cultural and Spiritual Access</option>
                            <option value="ecoservices7">Income Generation</option>
                        </select>


                          <!--<select ng-model="search.targets" style="width: 100%; margin-top: 5px;">
                            <option value="" selected>Aichi Targets</option>
                            <option value="Target1">Target 1: </option>
                            <option value="Target2">Target 2: </option>
                              <option value="Target3">Target 3: </option>
                              <option value="Target4">Target 4: </option>
                              <option value="Target5">Target 5: </option>
                              <option value="Target6">Target 6: </option>
                              <option value="Target7">Target 7: </option>
                              <option value="Target8">Target 8: </option>
                              <option value="Target9">Target 9: </option>
                              <option value="Target10">Target 10: </option>
                              <option value="Target11">Target 11: </option>
                              <option value="Target12">Target 12: </option>
                              <option value="Target13">Target 13: </option>
                              <option value="Target14">Target 14: </option>
                              <option value="Target15">Target 15: </option>
                              <option value="Target16">Target 16: </option>
                              <option value="Target17">Target 17: </option>
                              <option value="Target18">Target 18: </option>
                              <option value="Target19">Target 19: </option>
                              <option value="Target20">Target 20: </option>
                        </select>-->


                        <select ng-model="search.year_submitted" style="width: 100%; margin-top: 5px;">
                            <option value="" selected>Year Submitted</option>
                            <option value="2013">2013</option>
                            <option value="2012">2012</option>
                            <option value="2011">2011</option>
                            <option value="2010">2010</option>
                            <option value="2009">2009</option>
                        </select>

                        <select ng-model="search.funding_needed" style="width: 100%; margin-top: 5px;">
                            <option value="" selected>Amount of Funding Needed</option>
                            <option value="0">less than $0.5M USD</option>
                            <option value="500000">$0.5M to $2.5M USD</option>
                            <option value="2500000">$2.5M to $10M USD</option>
                            <option value="10000000">more than $10M USD</option>
                        </select>

                        <a class="btn-info" href="/explore/">clear search</a>

                    </li>
                </ul>
            </div>

            <div class="span9">



                <section id="projects" >
                    <h2 class="title-divider featurette-heading">LifeWeb Projects</h2>
                    <span class="muted">National priority projects</span> 
                    <div class="pull-right"><a ng-click="toggleList()" style="cursor:pointer;"><i class="{{listStyle}}"></i></a></div> 
                    <div class="pull-right" style="padding-right:10px;">Currency: <a ng-click="toggleCurrency()" style="cursor:pointer;">{{currency}}</a> | </div>


                    <div ng-show="list==false" class="media project_well" ng-repeat="proj in filtered = (projects | filter:search.keyword | filterCountry:search.country | filterYear:search.year_submitted | filterEcoservices:search.benefits | filterFunding:search.funding_needed | filterFundingStatus:search.is_funded | filterTargets:search.targets )| orderBy:sortTerm:orderList">

                        <a class="pull-left" href="/projects?id={{proj.id}}" >
                            <img ng-show="proj.old_id" class="media-object img-rounded" style="margin-top: 8px; width: 90px;" src="http://www.cbd.int/images/lifeweb/eoi/thumbnails/{{proj.old_id}}.jpg" alt="" />
                            <img ng-hide="proj.old_id" class="media-object img-rounded" style="margin-top: 8px; width: 90px;" src="http://www.cbd.int/images/lifeweb/eoi/thumbnails/{{proj.id}}.png" alt="" />
                            <div class="media-type" style="color: #333">{{ proj.approved_on_date | filterDate  }}</div>
                        </a>

                        <div class="media-body">
                            <span class="media-type" ng-bind-html="proj.country"></span>
                            <a href="/project?id={{proj.id}}">
                                <h4 class="media-heading" ng-bind-html="proj.title"></h4>
                            </a>
                            <span ng-bind-html="proj.summary"></span>
                            <br />

                            <div>
                                <span ng-show="proj.is_funded" style="color: #F00;">FUNDED:&nbsp;</span>
                                <span style="font-weight: bold; font-size: 13px;">{{proj.funding_needed | filterCurrency:proj.currency:currency}}</span>
                            </div>

                        </div>
                    </div>


                    <div id="List" ng-show="list==true">
                        <br/>
                        <style>
                            table td {
                                vertical-align: top;
                                font-size:12px;
                                line-height:14px!important;
                            }

                        </style>

                        <table class="table table-striped  table-hover">
                            <tr>
                                <th></th>
                                <th><span style="cursor:pointer;" ng-click="sortTable('title')">Title 
                                    <i ng-show="sortTerm=='title'" ng:class="{true:'down-caret', false:'up-caret'}[orderList]"></i></span></th>
                                <th><span style="cursor:pointer" ng-click="sortTable('country')">Country
                                    <i ng-show="sortTerm=='country'" ng:class="{true:'down-caret', false:'up-caret'}[orderList]"></i>
                                    </span></th>
                                <th><span style="cursor:pointer" ng-click="sortTable('funding_needed')">Total Cost
                                    <i ng-show="sortTerm=='funding_needed'" ng:class="{true:'down-caret', false:'up-caret'}[orderList]"></i>
                                    </span></th>
                                <th><span style="cursor:pointer" ng-click="sortTable('approved_on_date')">Date 
                                    <i ng-show="sortTerm=='approved_on_date'" ng:class="{true:'down-caret', false:'up-caret'}[orderList]"></i>
                                    </span></th>
                                <th><span style="cursor:pointer" ng-click="sortTable('funding_status')">Status
                                    <i ng-show="sortTerm=='funding_status'" ng:class="{true:'down-caret', false:'up-caret'}[orderList]"></i>
                                    </span></th>
                            </tr>
                            <tr ng:class="{'funded':'error', false:''}[proj.status]"  ng-repeat="proj in filtered = (projects | filter:search.keyword | filterCountry:search.country | filterYear:search.year_submitted | filterEcoservices:search.benefits | filterFunding:search.funding_needed | filterFundingStatus:search.is_funded | filterTargets:search.targets )| orderBy:sortTerm:orderList">
                                <td style="width: 70px;">

                                  

                                    <a href="/project?id={{proj.id}}"><img ng-show="proj.old_id" class="media-object img-rounded" style="max-width: 70px;max-height:70px;" src="http://www.cbd.int/images/lifeweb/eoi/thumbnails/{{proj.old_id}}.jpg" alt="" />
                                    <img ng-hide="proj.old_id" class="media-object img-rounded" style="max-width: 70px;max-height:70px;" src="http://www.cbd.int/images/lifeweb/eoi/thumbnails/{{proj.id}}.png" alt="" /></a></td>
                                <td style="font-weight:bold;"> <a href="/project?id={{proj.id}}"><span class="media-heading" ng-bind-html="proj.title"></span></a></td>
                                <td> <span ng-bind-html="proj.country" style="font-weight:bold;"></span></td>
                                <td nowrap> {{proj.funding_needed | filterCurrency:proj.currency:currency}} </td>
                                <td nowrap style="font-weight:bold; text-transform:uppercase;" >{{ proj.approved_on_date | filterDate  }}</td>
                                <td >
                                    <span ng:class="{'funded':'label label-success', 'not yet funded':'label label-important', 'some secured funding':'label label-info', 'some expected funding':'label label-info'}[proj.funding_status]">
                            <span ng-switch="proj.funding_status">
                                <span ng-switch-when="not yet funded">not yet funded</span>
                                <span ng-switch-when="funded">fully funded</span>
                                <span ng-switch-default>partially funded</span>
                            </span>
                        </span>
                                    <div ng-repeat="match in proj.funding_matches" style="white-space:nowrap;">
                                            {{match.amount |  filterCurrency:match.currency:currency}} ({{match.donor.acronym}})
                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>

                </section>

            </div><!-- end span 9-->
    </div><!-- end row-->
</div><!-- end container -->

    <!-- FOOTER -->
      <footer>
        <div ng-include src="'/app/lifeweb/footer.html'"></div>
      </footer>


      <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/js/bootstrap.js"></script>
  <!--CMS-->
    <script src="//cdnjs.cloudflare.com/ajax/libs/URI.js/1.7.2/URI.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/linq.js/2.2.0.2/linq.js"></script>
    <script src="/app/js/app_0-0-0.js"></script>
    <script src="/app/js/directives/cms/cms-module.js"></script>
    <script src="/app/js/utilities/km-utilities.js"></script>
    <script src="/app/js/utilities/km-authentication.js"></script>
    <!--<placeholder id="script"/>-->
    <div class="cmsToolbar"></div>
  </body>
</html>
